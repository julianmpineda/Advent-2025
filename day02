import java.io.*;
import java.util.*;

public class day02 {
    public static void main(String[] args) {

        List<String> ranges = new ArrayList<>();

        // Not sure if needed since given as a single line. Hardcode?

        try {
            File myObj = new File("src/data/data02.txt");
            Scanner myReader = new Scanner(myObj);
            myReader.useDelimiter(",");

            while (myReader.hasNext()) {
                ranges.add(myReader.next());
            }

            myReader.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        System.out.println("Part 1: " + partOne(ranges));
        System.out.println("Part 2: " + partTwo(ranges));
    }

    private static long partOne(List<String> ranges) {

        long invalid = 0;

        for (int i = 0; i < ranges.size(); i++) {
            String[] rangeStr = ranges.get(i).split("-");
            long start = Long.parseLong(rangeStr[0]);
            long end = Long.parseLong(rangeStr[1]);

            int sLen = rangeStr[0].length();
            int eLen = rangeStr[1].length();

            if (sLen % 2 != 0 && sLen == eLen) {
                /*
                Don't do anything, all numbers in range have odd length
                so no doubled numbers can exist in the range.
                */
            } else {
                int half = sLen / 2 <= 1 ? 1 : sLen / 2;
                String testStr = rangeStr[0].substring(0, half);
                long halfLong = Long.parseLong(testStr);
                testStr += testStr;

                while (Long.parseLong(testStr) <= end) {
                    long testLong = Long.parseLong(testStr);

                    if (testLong >= start) {
                        invalid += Long.parseLong(testStr);
                    }
                    halfLong++;
                    testStr = halfLong + "" + halfLong;
                }
            }
        }
        return invalid;
    }

    private static long partTwo(List<String> ranges) {

        long last = 0;
        List<String[]> rangeStr = new ArrayList<>();

        for (int i = 0; i < ranges.size(); i++) {
            rangeStr.add(ranges.get(i).split("-"));
            last = Long.max(last, Long.parseLong(rangeStr.get(i)[1]));
        }

        int len = ("" + last).length();
        long invalid = 0;
        long holdLong = 1;

        Set<String> checked = new HashSet<>();

        while (("" + holdLong).length() <= len / 2) {

            String testStr = holdLong + "" + holdLong;
            long testLong = Long.parseLong(testStr);

            while (testLong <= last) {

                testLong = Long.parseLong(testStr);

                if (!checked.contains(testStr)) {

                    for (int i = 0; i < rangeStr.size(); i++) {
                        long start = Long.parseLong(rangeStr.get(i)[0]);
                        long end = Long.parseLong(rangeStr.get(i)[1]);
                        
                        if (testLong >= start && testLong <= end) {
                            invalid += testLong;
                            break;
                        }
                    }
                    checked.add(testStr);
                }
                testStr += holdLong;
            }
            holdLong++;
        }
        return invalid;
    }
}
